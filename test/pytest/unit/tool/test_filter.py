import pytest

from jjpine.tool.filter import Filter as JJFilter

class TestFilter(object):

    test_words = [
        (
            {
                "data": [
                    1.97,
                    2.01,
                    1.96,
                    1.82,
                    1.87,
                    1.9,
                    1.89,
                    1.81,
                    2.15,
                    1.9,
                    1.87,
                    1.79,
                    1.76,
                    1.8,
                    1.85,
                    1.97,
                    2.04,
                    1.91,
                    1.9,
                    1.87,
                    1.9,
                    1.89,
                    1.96,
                    1.91,
                    2.07,
                    2.18,
                    2.12,
                    2.15,
                    1.92,
                    1.66,
                    1.74,
                    1.8,
                    1.77,
                    1.79,
                    1.82,
                    1.78,
                    1.77,
                    1.79,
                    1.75,
                    1.73,
                    1.7,
                    1.55,
                    1.56,
                    1.6,
                    1.54,
                    1.55,
                    1.51,
                    1.7,
                    1.62,
                    1.7,
                    1.64,
                    1.63,
                    1.55,
                    1.5,
                    1.39,
                    1.3,
                    1.29,
                    1.27,
                    1.35,
                    1.31,
                    1.19,
                    1.42,
                    1.27,
                    1.23,
                    1.21,
                    1.29,
                    1.29,
                    1.22,
                    1.21,
                    1.2,
                    1.1,
                    1.13,
                    1.12,
                    1.2,
                    1.15,
                    1.19,
                    1.13,
                    1.15,
                    1.12,
                    1.12,
                    1.17,
                    1.04,
                    0.92,
                    0.99,
                    0.85,
                    0.97,
                    0.95,
                    0.9,
                    0.89,
                    0.86,
                    0.99,
                    0.93,
                    1.01,
                    1.13,
                    1.13,
                    1.31,
                    1,
                    1.1,
                    1.07,
                    1.04,
                    1.05,
                    1.07,
                    1.1,
                    1.12,
                    1.14,
                    1.27,
                    1.3,
                    1.21,
                    1.27,
                    1.29,
                    1.38,
                    1.44,
                    1.32,
                    1.37,
                    1.44,
                    1.4,
                    1.48,
                    1.46,
                    1.51,
                    1.55,
                    1.48,
                    1.43,
                    1.39,
                    1.44,
                    1.58,
                    1.78,
                    1.82,
                    1.83,
                    1.7,
                    1.65,
                    1.67,
                    1.62,
                    2.15,
                    2.09,
                    2.26,
                    2.24,
                    2.51,
                    2.94,
                    2.69,
                    2.91,
                    2.95,
                    3.88,
                    3.46,
                    3.3,
                    3.18,
                    2.8,
                    2.75,
                    2.52,
                    2.37,
                    2.52,
                    2.63,
                    2.49,
                    2.3,
                    2.45,
                    2.43,
                    2.44,
                    2.26,
                    2.35,
                    2.22,
                    2.2,
                    2.02,
                    2.03,
                    2.34,
                    2.09,
                    1.89,
                    1.95,
                    2.09,
                    2.43,
                    2.23,
                    2.15,
                    2.1,
                    1.97,
                    1.82,
                    1.92,
                    1.93,
                    2.1,
                    2.01,
                    1.9,
                    1.95,
                    1.95,
                    2.02,
                    2.02,
                    2.26,
                    2.18,
                    2.45,
                    2.19,
                    2.11,
                    2.21,
                    2.3,
                    2.3,
                    2.28,
                    2.21,
                    2.19,
                    2.06,
                    2.13,
                    2.23,
                    2.23,
                    2.51,
                    2.37,
                    2.3,
                    2.77,
                    3.08,
                    3.46,
                    2.77,
                    2.69,
                    2.72,
                    2.84,
                    2.78,
                    2.66,
                    2.71,
                    2.63,
                    3.43,
                    3.2,
                    3.66,
                    5.78,
                    5.32,
                    5.94,
                    4.11,
                    4.13,
                    4.07,
                    3.87,
                    3.75,
                    3.9,
                    3.45,
                    3.83,
                    3.72,
                    3.41,
                    3,
                    2.93,
                    2.85,
                    2.79,
                    2.61,
                    2.9,
                    3.14,
                    3.66,
                    3.48,
                    3.04,
                    2.59,
                    2.6,
                    2.88,
                    2.95,
                    2.39,
                    2.7,
                    2.72,
                    2.56,
                    3.02,
                    3.28,
                    3.4,
                    3.58,
                    3.79,
                    3.48,
                    3.37,
                    3.37,
                    3.62,
                    3.52,
                    3.41,
                    3.24,
                    3.28,
                    3.33,
                    3.28,
                    3.75,
                    3.75
                ],
                "ema1_period": 12,
                "ema1_multiplier": 0.153846154,
                "ema2_period": 26,
                "ema2_multiplier": 0.074074074,
                "ema_macd_period": 9,
                "ema_macd_multiplier": 0.2
            },
            [
                None,
                None,
                None,
                None,
                None,
                None,
                None,
                None,
                None,
                None,
                None,
                None,
                None,
                None,
                None,
                None,
                None,
                None,
                None,
                None,
                None,
                None,
                None,
                None,
                None,
                None,
                None,
                None,
                None,
                None,
                None,
                None,
                None,
                None,
                True,
                True,
                True,
                True,
                True,
                True,
                True,
                False,
                False,
                True,
                True,
                True,
                True,
                True,
                True,
                True,
                True,
                True,
                False,
                False,
                False,
                False,
                False,
                False,
                True,
                True,
                False,
                True,
                True,
                False,
                False,
                True,
                True,
                False,
                True,
                True,
                False,
                False,
                True,
                True,
                True,
                True,
                False,
                True,
                False,
                False,
                True,
                False,
                False,
                False,
                False,
                True,
                True,
                False,
                True,
                False,
                True,
                True,
                True,
                True,
                True,
                True,
                False,
                False,
                False,
                False,
                False,
                False,
                True,
                True,
                True,
                True,
                True,
                False,
                False,
                False,
                True,
                True,
                False,
                False,
                True,
                False,
                True,
                False,
                False,
                True,
                False,
                False,
                False,
                False,
                True,
                True,
                True,
                True,
                False,
                False,
                False,
                False,
                True,
                True,
                True,
                True,
                True,
                True,
                False,
                True,
                False,
                True,
                False,
                False,
                False,
                False,
                False,
                False,
                False,
                False,
                True,
                False,
                False,
                True,
                True,
                True,
                False,
                True,
                True,
                True,
                False,
                True,
                True,
                True,
                False,
                True,
                True,
                True,
                True,
                True,
                False,
                False,
                False,
                True,
                True,
                True,
                True,
                False,
                True,
                True,
                True,
                True,
                True,
                True,
                True,
                False,
                False,
                False,
                True,
                True,
                False,
                False,
                False,
                False,
                False,
                True,
                True,
                True,
                True,
                False,
                True,
                True,
                True,
                False,
                False,
                False,
                False,
                False,
                False,
                False,
                False,
                True,
                True,
                True,
                True,
                True,
                True,
                False,
                False,
                False,
                False,
                False,
                False,
                False,
                False,
                False,
                False,
                False,
                False,
                False,
                False,
                False,
                True,
                True,
                True,
                True,
                False,
                False,
                False,
                True,
                True,
                False,
                True,
                True,
                True,
                True,
                True,
                True,
                True,
                True,
                False,
                False,
                False,
                True,
                False,
                False,
                False,
                False,
                False,
                False,
                True,
                True
            ]
        )
    ]
    @pytest.mark.parametrize("test_args, expected_result", test_words)
    def test_filter(self, jjfilter_fixture, test_args, expected_result):
        result = jjfilter_fixture.get_macd_histogram_filter(**test_args)
        assert result == expected_result

if __name__ == "__main__":
    pytest.main([__file__])
